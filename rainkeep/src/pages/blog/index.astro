---
import fs from 'fs';
import path from 'path';
import HamburgerNav from '../../layouts/HamburgerNav.astro';

const posts = [
  "DevLog250615",
  "DevLog250614",
  "DevLog250613",
  "DevLog250612",
  "DevLog250608",
  "DevLog250607",
  "DevLog250531",
  "DevLog250530",
  "DevLog250529",
  "DevLog250527",
  "DevLog250526",
  "DevLog250524",
  "DevLog250523",
  "DevLog250521",
  "DevLog250520",
  "DevLog250519b",
  "DevLog250519",
  "DevLog250518",
  "DevLog250517",
  "DevLog250516",
  "DevLog250515",
  "DevLog250514",
  "DevLog250513",
  "DevLog250512",
  "DevLog250511",
  "DevLog250510",
  "DevLog250509",
  "DevLog250508",
  "DevLog250507",
  "DevLog250504",
  "DevLog250503",
  "DevLog250502",
  "DevLog250426",
  "DevLog250425",
  "DevLog250424",
  "DevLog250423",
  "DevLog250422",
  "DevLog250421",
  "DevLog250420",
  "DevLog250419",
  "DevLog250418",
  "DevLog250417",
  "DevLog250416",
  "DevLog250415",
  "DevLog250413",
  "DevLog250412",
  "DevLog250411",
  "DevLog250409",
  "DevLog250408",
  "DevLog250407",
  "DevLog250402",
  "DevLog250401",
  "DevLog250331",
  "DevLog250330",
  "DevLog250329",
  "DevLog250328",
  "DevLog250327",
  "DevLog250326",
  "DevLog250325b",
  "DevLog250325",
  "DevLog250324",
  "DevLog250323",
  "DevLog250322",
  "DevLog250321",
  "DevLog250320",
  "DevLog250319",
  "DevLog250318",
  "DevLog250317",
  "DevLog250316",
  "DevLog250315",
  "DevLog250314",
  "DevLog250313",
  "DevLog250312",
  "DevLog250311",
  "DevLog250310",
  "DevLog250309",
  "DevLog250308",
  "DevLog250307",
  "DevLog250306",
  "DevLog250305",
  "DevLog250304",
  "DevLog250303",
  "DevLog250302",
  "devlog250301"
];

const blogPath = new URL('../../static/blog-html', import.meta.url).pathname;

function getExcerpt(file) {
  const fullPath = path.resolve(blogPath, `${file}.html`);
  if (!fs.existsSync(fullPath)) return 'No snippet available.';
  const content = fs.readFileSync(fullPath, 'utf8');
  const match = content.match(/<p class="excerpt">(.*?)<\/p>/s);
  return match ? match[1].trim() : 'No snippet available.';
}
---

<HamburgerNav title="Developer Logs">
  <div class="container">
    <p class="excerpt">
      Welcome to the Arynwood Blog. This space serves as the technical documentation log for all current and future coding projects.
      The site itself is being actively built — and the development process is fully transparent. You can follow the evolution of every system,
      contract, and line of logic through these devlogs. Visit the GitHub repository:<br />
      <div style="text-align: center; margin-top: 2rem;">
  <a href="https://github.com/skyevault/main/tree/main/rainkeep" target="_blank" rel="noopener"
     style="display: inline-block; background: var(--box); color: var(--link); border: 1px solid var(--border); padding: 0.5rem 1rem; border-radius: 4px; text-decoration: none; font-family: 'Courier New', monospace; box-shadow: 0 0 6px rgba(180, 142, 255, 0.2);">
    GitHub
  </a>
</div>
<hr>
 </p>

    <ul>
      {
        posts.map(file => (
          <li style="margin-bottom: 2rem;">
            <span class="prompt">$ cd ./blog-html/{file}.html</span><br />
            <a href={`/blog-html/${file}.html`}>
              {file}
            </a>
            <p class="snippet">{getExcerpt(file)}</p>
          </li>
        ))
      }
    </ul>

    <div class="footer" style="margin-top: 3rem; font-size: 0.9rem; text-align: center; color: #777;">
      Back to <a href="/">Terminal Home</a> • <a href="/projects">Projects</a> • <a href="/contact">Contact</a>
    </div>
  </div>
</HamburgerNav>
